<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„¤ì•„ì˜ ë½‘ê¸°íŒ</title>
    <style>
        /* CSS: ìŠ¤íƒ€ì¼ë§ (ì´ì „ê³¼ ë™ì¼) */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f9;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 20px;
            margin: 0;
            flex-wrap: wrap;
        }

        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            max-width: 1000px;
        }

        h1 {
            color: #d9534f;
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 3px solid #f0ad4e;
            padding-bottom: 10px;
        }

        /* ìŠ¤ì½”ì–´ ë³´ë“œ ìŠ¤íƒ€ì¼ */
        .scoreboard {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            padding: 10px;
            background-color: #ffe0b2; /* ì—°í•œ ì£¼í™©ìƒ‰ ë°°ê²½ */
            border-radius: 8px;
        }

        .rank-info {
            padding: 5px 15px;
            margin: 5px;
            background-color: #fff;
            border-radius: 5px;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }

        .rank-info:hover {
            transform: translateY(-2px);
        }

        .rank-info.rank-1 { background-color: #f0ad4e; color: white; } /* 1ë“± ê°•ì¡° */
        .rank-info.rank-7 { background-color: #4CAF50; color: white; } /* ê½(7ë“±) ê°•ì¡° */

        /* ë½‘ê¸°íŒ ê·¸ë¦¬ë“œ ìŠ¤íƒ€ì¼ */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(11, 1fr); /* 220ê°œ (11ì—´ x 20í–‰) */
            gap: 5px;
            max-width: 800px; /* ê·¸ë¦¬ë“œ ìµœëŒ€ ë„ˆë¹„ */
            margin: 0 auto;
        }

        .ticket {
            width: 50px; /* ë½‘ê¸° ì¹¸ í¬ê¸° */
            height: 50px;
            background-color: #4b0082; /* ê¸ê¸° ì „ ìƒ‰ìƒ (ì§„í•œ ë³´ë¼ìƒ‰) */
            border: 2px solid #f0ad4e; /* ì£¼í™©ìƒ‰ í…Œë‘ë¦¬ */
            border-radius: 50%; /* ë™ê·¸ë€ ëª¨ì–‘ */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 10px;
            color: white;
            cursor: pointer;
            user-select: none;
            transition: background-color 0.3s, transform 0.1s;
            position: relative;
        }

        .ticket:hover:not(.revealed) {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(240, 173, 78, 0.7);
        }

        /* ê¸íŒ í›„ ìŠ¤íƒ€ì¼ */
        .revealed {
            cursor: default;
            font-weight: bold;
            font-size: 12px;
            color: black;
            background-color: #ffffff; /* ê¸ì€ í›„ í•˜ì–€ ë°°ê²½ */
            border: 2px dashed #90a4ae;
        }

        .rank-1-result { background-color: #d9534f; color: white; } /* ë¹¨ê°• */
        .rank-2-result { background-color: #f0ad4e; color: black; } /* ì£¼í™© */
        .rank-3-result { background-color: #5cb85c; color: white; } /* ì´ˆë¡ */
        .rank-4-result { background-color: #5bc0de; color: white; } /* íŒŒë‘ */
        .rank-5-result { background-color: #9b59b6; color: white; } /* ë³´ë¼ */
        .rank-6-result { background-color: #34495e; color: white; } /* ì§™ì€ íšŒìƒ‰ */
        .rank-7-result { background-color: #4CAF50; color: white; } /* ê½(7ë“±) - ì´ˆë¡ìƒ‰ ê°•ì¡° */
        
        .reset-button {
            display: block;
            margin: 20px auto 0;
            padding: 10px 20px;
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .reset-button:hover {
            background-color: #c82333;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>âœ¨ ì„¤ì•„ì˜ ë½‘ê¸°íŒ âœ¨</h1>
        
        <div class="scoreboard" id="scoreboard">
            <div class="rank-info rank-1">1ë“±: <span id="count-1"></span>ê°œ</div>
            <div class="rank-info">2ë“±: <span id="count-2"></span>ê°œ</div>
            <div class="rank-info">3ë“±: <span id="count-3"></span>ê°œ</div>
            <div class="rank-info">4ë“±: <span id="count-4"></span>ê°œ</div>
            <div class="rank-info">5ë“±: <span id="count-5"></span>ê°œ</div>
            <div class="rank-info">6ë“±: <span id="count-6"></span>ê°œ</div>
            <div class="rank-info rank-7">ê½ (7ë“±): <span id="count-7"></span>ê°œ</div>
        </div>

        <div class="grid-container" id="gridContainer">
            </div>
        
        <button class="reset-button" onclick="resetGame()">ê¸°ë¡ ì´ˆê¸°í™” ë° ë½‘ê¸°íŒ ì¬ì„¤ì •</button>

    </div>

    <script>
        // JavaScript: ê²Œì„ ë¡œì§ ë° ì €ì¥ ê¸°ëŠ¥
        const TOTAL_TICKETS = 220;
        const PRIZE_COUNTS = {
            1: 1,
            2: 2,
            3: 7,
            4: 10,
            5: 30,
            6: 70,
            7: 100 // ê½ìœ¼ë¡œ í‘œì‹œë  ë“±ìˆ˜
        };

        const PRIZE_NAMES = {
            1: "ğŸ¥‡ 1ë“±",
            2: "ğŸ¥ˆ 2ë“±",
            3: "ğŸ¥‰ 3ë“±",
            4: "4ë“±",
            5: "5ë“±",
            6: "6ë“±",
            7: "ê½ (7ë“±)" // 7ë“± í‘œì‹œ ë³€ê²½
        };

        const STORAGE_KEY_MAP = 'seolahPrizesMap';
        const STORAGE_KEY_REVEALED = 'seolahRevealed';
        const STORAGE_KEY_REMAINING = 'seolahRemaining';

        let prizeMap = []; // ë‹¹ì²¨ ê²°ê³¼ë¥¼ ì €ì¥í•  ë°°ì—´
        let revealedTickets = {}; // ë½‘ì€ ì¹¸ {index: true}
        let remainingPrizes = { ...PRIZE_COUNTS }; // ë‚¨ì€ ë‹¹ì²¨ ê°œìˆ˜ ì¶”ì 

        // --- 1. ë‹¹ì²¨ ê²°ê³¼ ë¬´ì‘ìœ„ ë°°ë¶„ ë¡œì§ (ì €ì¥ëœ ê°’ì´ ì—†ìœ¼ë©´ ì‹¤í–‰) ---
        function initializePrizeMap() {
            // ì €ì¥ëœ ë§µì´ ìˆìœ¼ë©´ ë¡œë“œ
            const savedMap = localStorage.getItem(STORAGE_KEY_MAP);
            if (savedMap) {
                prizeMap = JSON.parse(savedMap);
                console.log("ì €ì¥ëœ ë½‘ê¸°íŒ ë§µì„ ë¡œë“œí–ˆìŠµë‹ˆë‹¤.");
            } else {
                // ì €ì¥ëœ ë§µì´ ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±
                let allPrizes = [];
                for (const rank in PRIZE_COUNTS) {
                    for (let i = 0; i < PRIZE_COUNTS[rank]; i++) {
                        allPrizes.push(parseInt(rank));
                    }
                }
                
                // ì„ê¸° (Fisher-Yates ì…”í”Œ)
                for (let i = allPrizes.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [allPrizes[i], allPrizes[j]] = [allPrizes[j], allPrizes[i]];
                }

                prizeMap = allPrizes;
                localStorage.setItem(STORAGE_KEY_MAP, JSON.stringify(prizeMap));
                console.log("ìƒˆ ë½‘ê¸°íŒ ë§µì„ ìƒì„±í•˜ê³  ì €ì¥í–ˆìŠµë‹ˆë‹¤.");
            }
        }
        
        // --- 2. ì €ì¥ëœ ë½‘ê¸° ê¸°ë¡ ë° ë‚¨ì€ ê°œìˆ˜ ë¡œë“œ ---
        function loadGameData() {
            const savedRevealed = localStorage.getItem(STORAGE_KEY_REVEALED);
            if (savedRevealed) {
                revealedTickets = JSON.parse(savedRevealed);
                console.log("ì €ì¥ëœ ë½‘ê¸° ê¸°ë¡ì„ ë¡œë“œí–ˆìŠµë‹ˆë‹¤.");
            }
            
            const savedRemaining = localStorage.getItem(STORAGE_KEY_REMAINING);
            if (savedRemaining) {
                remainingPrizes = JSON.parse(savedRemaining);
                console.log("ì €ì¥ëœ ë‚¨ì€ ê°œìˆ˜ë¥¼ ë¡œë“œí–ˆìŠµë‹ˆë‹¤.");
            } else {
                // ì €ì¥ëœ ë‚¨ì€ ê°œìˆ˜ê°€ ì—†ìœ¼ë©´ ì´ˆê¸°ê°’ ì‚¬ìš©
                remainingPrizes = { ...PRIZE_COUNTS };
            }
        }
        
        // --- 3. ë½‘ê¸° ê¸°ë¡ ì €ì¥ ---
        function saveGameData() {
            localStorage.setItem(STORAGE_KEY_REVEALED, JSON.stringify(revealedTickets));
            localStorage.setItem(STORAGE_KEY_REMAINING, JSON.stringify(remainingPrizes));
        }

        // --- 4. ë½‘ê¸°íŒ UI ìƒì„± ë° ìƒíƒœ ë°˜ì˜ ---
        function createTickets() {
            const grid = document.getElementById('gridContainer');
            grid.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”
            
            for (let i = 0; i < TOTAL_TICKETS; i++) {
                const ticket = document.createElement('div');
                ticket.classList.add('ticket');
                ticket.dataset.index = i; // ë°°ì—´ ì¸ë±ìŠ¤ ì €ì¥
                ticket.textContent = (i + 1); // ì¹¸ ë²ˆí˜¸ í‘œì‹œ
                ticket.addEventListener('click', handleTicketClick);
                
                // ì €ì¥ëœ ë½‘ê¸° ê¸°ë¡ì„ UIì— ë°˜ì˜
                if (revealedTickets[i]) {
                    const prizeRank = prizeMap[i];
                    ticket.classList.add('revealed', `rank-${prizeRank}-result`);
                    ticket.textContent = PRIZE_NAMES[prizeRank];
                    ticket.removeEventListener('click', handleTicketClick); // ì´ë¯¸ ë½‘ì€ ê±´ í´ë¦­ ì•ˆ ë˜ê²Œ
                }
                
                grid.appendChild(ticket);
            }
        }

        // --- 5. ë½‘ê¸° í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬ ---
        function handleTicketClick(event) {
            const ticket = event.target;
            const index = parseInt(ticket.dataset.index);
            
            // ì´ë¯¸ ë½‘ì•˜ëŠ”ì§€ ë‹¤ì‹œ í™•ì¸ (UIì— ë°˜ì˜ ì•ˆ ëœ ê²½ìš° ë°©ì§€)
            if (revealedTickets[index]) {
                return;
            }

            const prizeRank = prizeMap[index];
            const prizeName = PRIZE_NAMES[prizeRank];

            // UI ì—…ë°ì´íŠ¸
            ticket.classList.add('revealed', `rank-${prizeRank}-result`);
            ticket.textContent = prizeName;
            
            // ê¸°ë¡ ì—…ë°ì´íŠ¸
            revealedTickets[index] = true;
            remainingPrizes[prizeRank]--;
            
            // ë°ì´í„° ì €ì¥
            saveGameData(); 
            updateScoreboard();

            // ë‹¹ì²¨ ì•Œë¦¼ (ì„ íƒ ì‚¬í•­)
            alert(`ì¶•í•˜í•©ë‹ˆë‹¤! ${prizeName}ì— ë‹¹ì²¨ë˜ì—ˆìŠµë‹ˆë‹¤.`);
            
            // ì¤‘ë³µ í´ë¦­ ë°©ì§€
            ticket.removeEventListener('click', handleTicketClick);
        }

        // --- 6. ìŠ¤ì½”ì–´ ë³´ë“œ ì—…ë°ì´íŠ¸ ---
        function updateScoreboard() {
            for (const rank in PRIZE_COUNTS) {
                const countElement = document.getElementById(`count-${rank}`);
                if (countElement) {
                    countElement.textContent = remainingPrizes[rank];
                }
            }
        }

        // --- 7. ê²Œì„ ì´ˆê¸°í™” í•¨ìˆ˜ ---
        function resetGame() {
            if (confirm("ì •ë§ë¡œ ëª¨ë“  ë½‘ê¸° ê¸°ë¡ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ë™ì‘ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")) {
                localStorage.removeItem(STORAGE_KEY_MAP);
                localStorage.removeItem(STORAGE_KEY_REVEALED);
                localStorage.removeItem(STORAGE_KEY_REMAINING);
                
                // ë³€ìˆ˜ ì´ˆê¸°í™”
                prizeMap = [];
                revealedTickets = {};
                remainingPrizes = { ...PRIZE_COUNTS };
                
                // ê²Œì„ ì¬ì‹œì‘
                initializePrizeMap();
                createTickets();
                updateScoreboard();
                alert("ë½‘ê¸°íŒì´ ì„±ê³µì ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.");
            }
        }

        // --- í”„ë¡œê·¸ë¨ ì‹œì‘ ---
        document.addEventListener('DOMContentLoaded', () => {
            initializePrizeMap(); // ë§µ ë¡œë“œ ë˜ëŠ” ìƒì„±
            loadGameData();      // ë½‘ê¸° ê¸°ë¡ ë¡œë“œ
            createTickets();     // UI ìƒì„±
            updateScoreboard();  // ìŠ¤ì½”ì–´ ë³´ë“œ ì—…ë°ì´íŠ¸
        });
    </script>
</body>
</html>